{% extends 'base.html.twig' %}

{% block title %}Mon Compte
{% endblock %}

{% block body %}

	<main class="row container justify-content-md-between" id="account-page-main">
		<section style="height: 200px; background-color: white;" class="d-flex col align-items-center justify-content-around" id="compte_user_insert">
			<div style="min-width: 140px; max-width: 200px;" class="col" id="picture">
				<img src="{{ asset('images/icon_account.png') }}" class="img-fluid" alt="image générique de représentation du compte client">
			</div>
			<div style="min-width: 150px; max-width: 200px;" class="row align-items-center col h-100" id="user_deconnect">
				<div>
					<div class="fw-bold">Bonjour</div>
					<div class="">{{ user.firstname }}
						{{ user.lastname }}</div>
				</div>
				<div class="text-primary">client N°{{ user.id }}</div>
				<a href="{{ path('app_logout') }}" class="btn border border-danger rounded-pill link-danger fw-bold fs-6">Me déconnecter</a>
			</div>
		</section>

		<section style="height: 80px; background-color: white;" class="row align-items-center justify-content-start d-lg-none col">
			<div style="background-color: #F25528; height: 40px;" class="text-center menu-title text-white text-uppercase fw-bold fs-3 col">Menu</div>
			<div class="col p-0">
				<div class="dropdown ">
					<button class="fw-bold btn dropdown-toggle width-container-dropdown rounded-0 border button-menu-acount" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
						Afficher le menu
					</button>
					<ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
						<li>
							<button class="dropdown-item" id="menu-page-acount-informations" type="button">Mes informations</button>
						</li>
						<li>
							<button class="dropdown-item" id="menu-page-acount-addresses" type="button">Mes adresses</button>
						</li>
						<li>
							<button class="dropdown-item" id="menu-page-acount-orders" type="button">Mes commandes</button>
						</li>
					</ul>
				</div>
			</div>
		</section>

		<section style="background-color: white;" class="order-md-1 d-none d-lg-flex flex-column col-lg-3 mx-5">

			<button class="button-page-acount fw-bold mb-5" id="button-page-acount-informations">Mes informations</button>
			<button class="button-page-acount fw-bold mb-5" id="button-page-acount-addresses">Mes adresses</button>
			<button class="button-page-acount fw-bold mb-5" id="button-page-acount-orders">Mes commandes</button>

		</section>


		<section class="row col col-lg-5 mb-3 p-2" id="compte_user_informations">
			<h1 style="color: black;" class="text-center mb-3 fs-2">Vos informations personnelles</h1>
			<form action="">
				<div class="row justify-content-start mb-3">
					<span style="color: black;" class="fs-6">Civilité :</span>
					<div class="col-3">
						<label class="" for="radio">M.</label>
						<input class="" {{ user.gender == 'Monsieur' ? 'checked' : '' }} type="radio" name="radio" id="radio" value="option1">
					</div>
					<div class="col-3">
						<label class="" for="radio2">Mme</label>
						<input class="" {{ user.gender == 'Madame' ? 'checked' : '' }} type="radio" name="radio" id="radio2" value="option2">
					</div>
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Prénom :</span>
					<label class="" for="firstname"></label>
					<input value="{{ user.firstname }}" class="form-control" type="text" name="fistname" id="firstname" required>
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Nom :</span>
					<label class="" for="lastname"></label>
					<input value="{{ user.lastname }}" class="form-control" type="text" name="lastname" id="lastname" required>
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Adresse email :</span>
					<label for="email"></label>
					<input value="{{ user.email }}" class="form-control" type="email" name="email" id="email">
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">N° de Téléphone :</span>
					<label for="number"></label>
					<input value="{{ user.phoneNumber }}" class="form-control" type="number" name="number" id="number">
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Date de naissance :
						{{ user.birthdate |date('d-m-Y') }}</span>
					<label for="date"></label>
					<input class="form-control" type="date" name="date" id="date">
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Mot de passe :</span>
					<label for="password"></label>
					<input class="form-control" type="password" name="password" id="password">
				</div>
				<button type="submit" class="btn btn-primary">Editer</button>
			</form>
		</section>

		<section class="d-none row col col-lg-5 mb-3 p-2" id="compte_user_addresses">
			{% set i = 1 %}
			{% for address in user.addresses %}
			<h1 style="color: black;" class="text-center mb-3 fs-2">Votre adresse {{ i }}</h1>
			<form action="">
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Adresse utilisée pour :</span>
					<label class="" for="type"></label>
					<input value="{{ address.type }}" class="form-control" type="text" name="type" id="type" required>
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Rue :</span>
					<label class="" for="street"></label>
					<input value="{{ address.street }}" class="form-control" type="text" name="street" id="street" required>
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Code postal :</span>
					<label for="zipcode"></label>
					<input value="{{ address.zipcode }}" class="form-control" type="number" name="zipcode" id="zipcode">
				</div>
				<div class="mb-3">
					<span style="color: black;" class="fs-6">Ville :</span>
					<label for="city"></label>
					<input value="{{ address.city }}" class="form-control" type="text" name="city" id="city">
				</div>
				<button type="submit" class="btn btn-primary">editer</button>
			</form>
			{% set i = i + 1 %}
		{% endfor %}
		</section>

		<section class="d-none row col col-lg-5 mb-3 p-2" id="compte_user_orders">
			{% for order in user.orders|reverse %}
			<h1 style="color: black;" class="text-center mb-3 fs-2">Votre commande {{ order.id }}</h1>
			<div class="ms-5 fst-italic">commande effectuée le {{ order.createdAt|date('d-m-Y') }}</div>
			{% set results = [] %}
			{% for orderLine in order.orderLines %}
			{% set results = results|merge([orderLine.inclTaxesUnitPrice]) %}
		
				<div class="ms-5">
			<h2 style="color: black;" class="text-start mt-1 fs-5 text-primary">Ligne de commande {{ orderLine.id }}</h1>
					<p>Nom du produit : {{ orderLine.productName }}</p>
					<p>Quantité : {{ orderLine.quantity }}</p>
					<p>Prix unitaire HT : {{ orderLine.exclTaxesUnitPrice }} € HT</p>
					<p>TVA : {{ orderLine.salesTax }} %</p>
					<p>Prix unitaire TTC : {{ orderLine.inclTaxesUnitPrice }} € TTC</p>
				</div>
	
		{% endfor %}
		    {% set totalAmount = 0 %}
            {% for result in results %}
            {% set totalAmount = totalAmount + result %}
            {% endfor %}
				<div class="fw-bold mb-4">Total général de la commande : {{ totalAmount }}€ TTC</div>
		{% endfor %}
		</section>

	</main>

{% endblock %}
